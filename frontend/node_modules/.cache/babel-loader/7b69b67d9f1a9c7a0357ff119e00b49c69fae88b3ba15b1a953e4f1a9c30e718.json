{"ast":null,"code":"import { noop } from 'motion-utils';\nimport { addToQueue } from './queue.mjs';\nclass ViewTransitionBuilder {\n  constructor(update, options = {}) {\n    this.currentSubject = \"root\";\n    this.targets = new Map();\n    this.notifyReady = noop;\n    this.readyPromise = new Promise(resolve => {\n      this.notifyReady = resolve;\n    });\n    this.update = update;\n    this.options = {\n      interrupt: \"wait\",\n      ...options\n    };\n    addToQueue(this);\n  }\n  get(subject) {\n    this.currentSubject = subject;\n    return this;\n  }\n  layout(keyframes, options) {\n    this.updateTarget(\"layout\", keyframes, options);\n    return this;\n  }\n  new(keyframes, options) {\n    this.updateTarget(\"new\", keyframes, options);\n    return this;\n  }\n  old(keyframes, options) {\n    this.updateTarget(\"old\", keyframes, options);\n    return this;\n  }\n  enter(keyframes, options) {\n    this.updateTarget(\"enter\", keyframes, options);\n    return this;\n  }\n  exit(keyframes, options) {\n    this.updateTarget(\"exit\", keyframes, options);\n    return this;\n  }\n  crossfade(options) {\n    this.updateTarget(\"enter\", {\n      opacity: 1\n    }, options);\n    this.updateTarget(\"exit\", {\n      opacity: 0\n    }, options);\n    return this;\n  }\n  updateTarget(target, keyframes, options = {}) {\n    const {\n      currentSubject,\n      targets\n    } = this;\n    if (!targets.has(currentSubject)) {\n      targets.set(currentSubject, {});\n    }\n    const targetData = targets.get(currentSubject);\n    targetData[target] = {\n      keyframes,\n      options\n    };\n  }\n  then(resolve, reject) {\n    return this.readyPromise.then(resolve, reject);\n  }\n}\nfunction animateView(update, defaultOptions = {}) {\n  return new ViewTransitionBuilder(update, defaultOptions);\n}\nexport { ViewTransitionBuilder, animateView };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}